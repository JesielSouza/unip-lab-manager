<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Gerenciar Usuários | UNIP Lab Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <style>
    body { background-color: #f8f9fa; }
  </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow">
    <div class="container">
      <span class="navbar-brand"><i class="bi bi-person-circle"></i> Admin: {{ usuario_logado }}</span>
      <a class="btn btn-outline-light btn-sm" href="/painel_unip">Painel</a>
      <a class="btn btn-outline-light btn-sm" href="/logout">Sair</a>
      <a class="btn btn-outline-warning btn-sm me-2" href="/admin/perfil">Meu Perfil</a>
    </div>
  </nav>

  <div class="container mt-4">
    <h2><i class="bi bi-people"></i> Gerenciar Usuários</h2>
    <a href="/cadastro" class="btn btn-success mb-3">+ Novo Usuário</a>

    <table class="table table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Login</th>
          <th>Email</th>
          <th>Role</th>
          <th>Turma</th>
          <th>Semestre</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for u in usuarios %}
        <tr>
          <td>{{ u.id }}</td>
          <td>{{ u.login }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.role }}</td>
          <td>{{ u.turma or '' }}</td>
          <td>{{ u.semestre or '' }}</td>
          <td>
            {% if u.role != 'admin' %}
            <a href="/admin/editar_usuario/{{ u.id }}" class="btn btn-sm btn-outline-primary">Editar</a>
            <a href="/admin/excluir_usuario/{{ u.id }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Excluir usuário?')">Excluir</a>
            {% else %}
            <a href="/admin/perfil" class="btn btn-sm btn-outline-secondary">Editar Perfil</a>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</body>
</html>